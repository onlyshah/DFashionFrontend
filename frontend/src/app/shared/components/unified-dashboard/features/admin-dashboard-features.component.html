<div class="admin-dashboard-features">

  <!-- Welcome Section -->
  <div class="welcome-section">
    <h1>Welcome back, {{ currentUser?.fullName }}!</h1>
    <p>Here's what's happening with your platform today.</p>
  </div>

  <!-- Stats Cards -->
  <div class="stats-grid">
    <mat-card class="stat-card" *ngFor="let stat of statsCards">
      <mat-card-content>
        <div class="stat-content">
          <div class="stat-info">
            <h3>{{ stat.value | number }}</h3>
            <p>{{ stat.title }}</p>
            <div class="stat-change" [ngClass]="stat.changeType">
              <mat-icon>{{ stat.changeIcon }}</mat-icon>
              <span>{{ stat.change }}</span>
            </div>
          </div>
          <div class="stat-icon" [style.background-color]="stat.color">
            <mat-icon>{{ stat.icon }}</mat-icon>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Quick Actions -->
  <mat-card class="quick-actions-card">
    <mat-card-header>
      <mat-card-title>Quick Actions</mat-card-title>
      <mat-card-subtitle>Common administrative tasks</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <div class="quick-actions-grid">
        <button mat-raised-button *ngFor="let action of quickActions" class="quick-action-btn" [style.background-color]="action.color" (click)="navigateToAction(action)">
          <mat-icon>{{ action.icon }}</mat-icon>
          <div class="action-text">
            <span class="action-title">{{ action.title }}</span>
            <span class="action-desc">{{ action.description }}</span>
          </div>
        </button>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- System Health -->
  <mat-card class="system-health-card" *ngIf="hasFeature('system-monitoring')">
    <mat-card-header>
      <mat-card-title>System Health</mat-card-title>
      <mat-card-subtitle>Current system status</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <div class="health-indicators">
        <div class="health-item">
          <div class="health-label">Server Status</div>
          <div class="health-status" [ngClass]="systemHealth.server">
            {{ systemHealth.server | titlecase }}
          </div>
        </div>
        <div class="health-item">
          <div class="health-label">Database</div>
          <div class="health-status" [ngClass]="systemHealth.database">
            {{ systemHealth.database | titlecase }}
          </div>
        </div>
        <div class="health-item">
          <div class="health-label">API Response</div>
          <div class="health-value">{{ systemHealth.apiResponseTime }}ms</div>
        </div>
        <div class="health-item">
          <div class="health-label">Active Users</div>
          <div class="health-value">{{ systemHealth.activeUsers }}</div>
        </div>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- Super Admin Features -->
  <div class="super-admin-section" *ngIf="isSuperAdmin">

    <!-- Role Management -->
    <mat-card class="role-management-card">
      <mat-card-header>
        <mat-card-title>Role Management</mat-card-title>
        <mat-card-subtitle>Manage user roles and permissions</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <div class="role-stats">
          <div class="role-stat" *ngFor="let role of roleStats">
            <div class="role-info">
              <h4>{{ role.count }}</h4>
              <p>{{ role.name }}</p>
            </div>
            <div class="role-actions">
              <button mat-icon-button (click)="manageRole(role.id)">
                <mat-icon>settings</mat-icon>
              </button>
            </div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- System Configuration -->
    <mat-card class="system-config-card">
      <mat-card-header>
        <mat-card-title>System Configuration</mat-card-title>
        <mat-card-subtitle>Application settings and configuration</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <div class="config-options">
          <div class="config-item">
            <div class="config-info">
              <h6>Maintenance Mode</h6>
              <p>Enable/disable system maintenance</p>
            </div>
            <mat-slide-toggle [checked]="systemConfig.maintenanceMode" (change)="toggleMaintenanceMode($event)">
            </mat-slide-toggle>
          </div>
          <div class="config-item">
            <div class="config-info">
              <h6>User Registration</h6>
              <p>Allow new user registrations</p>
            </div>
            <mat-slide-toggle [checked]="systemConfig.allowRegistration" (change)="toggleRegistration($event)">
            </mat-slide-toggle>
          </div>
          <div class="config-item">
            <div class="config-info">
              <h6>Email Notifications</h6>
              <p>System email notifications</p>
            </div>
            <mat-slide-toggle [checked]="systemConfig.emailNotifications" (change)="toggleEmailNotifications($event)">
            </mat-slide-toggle>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Security Overview -->
    <mat-card class="security-overview-card">
      <mat-card-header>
        <mat-card-title>Security Overview</mat-card-title>
        <mat-card-subtitle>Security metrics and alerts</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <div class="security-metrics">
          <div class="security-metric">
            <div class="metric-icon" style="background-color: #28a745;">
              <mat-icon>security</mat-icon>
            </div>
            <div class="metric-info">
              <h4>{{ securityMetrics.successfulLogins }}</h4>
              <p>Successful Logins (24h)</p>
            </div>
          </div>
          <div class="security-metric">
            <div class="metric-icon" style="background-color: #dc3545;">
              <mat-icon>warning</mat-icon>
            </div>
            <div class="metric-info">
              <h4>{{ securityMetrics.failedLogins }}</h4>
              <p>Failed Logins (24h)</p>
            </div>
          </div>
          <div class="security-metric">
            <div class="metric-icon" style="background-color: #ffc107;">
              <mat-icon>block</mat-icon>
            </div>
            <div class="metric-info">
              <h4>{{ securityMetrics.blockedIPs }}</h4>
              <p>Blocked IPs</p>
            </div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Recent Activity -->
  <mat-card class="recent-activity-card">
    <mat-card-header>
      <mat-card-title>Recent Activity</mat-card-title>
      <mat-card-subtitle>Latest system activities</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <div class="activity-list">
        <div class="activity-item" *ngFor="let activity of recentActivities">
          <div class="activity-icon" [style.background-color]="activity.color">
            <mat-icon>{{ activity.icon }}</mat-icon>
          </div>
          <div class="activity-content">
            <div class="activity-title">{{ activity.title }}</div>
            <div class="activity-description">{{ activity.description }}</div>
            <div class="activity-time">{{ activity.timestamp | date:'short' }}</div>
          </div>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
</div>