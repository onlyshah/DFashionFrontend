<div class="container-scroller">
  <!-- Header -->
  <app-admin-header></app-admin-header>

  <!-- Page Container -->
  <div class="container-fluid page-body-wrapper">
    <!-- Sidebar -->
    <app-admin-sidebar></app-admin-sidebar>

    <!-- Main Content -->
    <div class="main-panel">
      <div class="content-wrapper">
        <!-- Router Outlet for Admin Pages -->
        <div *ngIf="isChildRoute">
          <router-outlet></router-outlet>
        </div>

        <!-- Default Dashboard View -->
        <ng-container *ngIf="!isChildRoute">
          <!-- Loading State -->
          <div *ngIf="isLoading" class="row">
            <div class="col-12 text-center">
              <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
              </div>
            </div>
          </div>

          <!-- Dashboard Content -->
          <div *ngIf="!isLoading">
            <!-- Error State -->
          <div *ngIf="error" class="row mb-4">
            <div class="col-12">
              <div class="alert alert-danger" role="alert">
                {{ error }}
              </div>
            </div>
          </div>

          <!-- Stats Overview -->
          <div class="row">
            <div class="col-xl-3 col-lg-6 col-md-6 grid-margin stretch-card">
              <div class="card card-stat">
                <div class="card-body">
                  <div class="d-flex justify-content-between align-items-center">
                    <div class="stat-content">
                      <h4 class="mb-3">Today's Sales</h4>
                      <h2 class="mb-2">${{ dashboardData?.todaySales || 0 }}</h2>
                      <div class="stat-change" [class.text-success]="(dashboardData?.salesGrowth || 0) > 0" [class.text-danger]="(dashboardData?.salesGrowth || 0) < 0">
                        <i [class]="(dashboardData?.salesGrowth || 0) > 0 ? 'typcn typcn-arrow-up-thick' : 'typcn typcn-arrow-down-thick'"></i>
                        {{ dashboardData?.salesGrowth }}% from yesterday
                      </div>
                    </div>
                    <div class="stat-icon">
                      <i class="typcn typcn-shopping-cart text-primary"></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-xl-3 col-lg-6 col-md-6 grid-margin stretch-card">
              <div class="card card-stat">
                <div class="card-body">
                  <div class="d-flex justify-content-between align-items-center">
                    <div class="stat-content">
                      <h4 class="mb-3">Orders</h4>
                      <h2 class="mb-2">{{ dashboardData?.totalOrders || 0 }}</h2>
                      <div class="stat-change" [class.text-success]="(dashboardData?.orderGrowth || 0) > 0" [class.text-danger]="(dashboardData?.orderGrowth || 0) < 0">
                        <i [class]="(dashboardData?.orderGrowth || 0) > 0 ? 'typcn typcn-arrow-up-thick' : 'typcn typcn-arrow-down-thick'"></i>
                        {{ dashboardData?.orderGrowth }}% from last week
                      </div>
                    </div>
                    <div class="stat-icon">
                      <i class="typcn typcn-clipboard text-success"></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-xl-3 col-lg-6 col-md-6 grid-margin stretch-card">
              <div class="card card-stat">
                <div class="card-body">
                  <div class="d-flex justify-content-between align-items-center">
                    <div class="stat-content">
                      <h4 class="mb-3">Products</h4>
                      <h2 class="mb-2">{{ dashboardData?.totalProducts || 0 }}</h2>
                      <div class="stat-change text-info">
                        <i class="typcn typcn-info-large"></i>
                        {{ dashboardData?.lowStockProducts || 0 }} low in stock
                      </div>
                    </div>
                    <div class="stat-icon">
                      <i class="typcn typcn-tag text-info"></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-xl-3 col-lg-6 col-md-6 grid-margin stretch-card">
              <div class="card card-stat">
                <div class="card-body">
                  <div class="d-flex justify-content-between align-items-center">
                    <div class="stat-content">
                      <h4 class="mb-3">Customers</h4>
                      <h2 class="mb-2">{{ dashboardData?.totalCustomers || 0 }}</h2>
                      <div class="stat-change text-success">
                        <i class="typcn typcn-user-add"></i>
                        {{ dashboardData?.newCustomers || 0 }} new today
                      </div>
                    </div>
                    <div class="stat-icon">
                      <i class="typcn typcn-group text-warning"></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Recent Orders -->
          <div class="row">
            <div class="col-12 grid-margin">
              <div class="card">
                <div class="card-body">
                  <div class="d-flex justify-content-between align-items-center mb-4">
                    <h4 class="card-title mb-0">Recent Orders</h4>
                    <a href="javascript:void(0)" class="btn btn-link">View All</a>
                  </div>
                  <div class="table-responsive">
                    <table class="table">
                      <thead>
                        <tr>
                          <th>Order ID</th>
                          <th>Customer</th>
                          <th>Products</th>
                          <th>Total</th>
                          <th>Status</th>
                          <th>Action</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let order of dashboardData?.recentOrders">
                          <td><strong>#{{ order.id }}</strong></td>
                          <td>{{ order.customer }}</td>
                          <td>{{ order.products }}</td>
                          <td class="font-weight-bold">${{ order.amount }}</td>
                          <td>
                            <span [class]="'badge badge-' + (order.status.toLowerCase())" class="px-3 py-2">
                              {{ order.status | titlecase }}
                            </span>
                          </td>
                          <td>
                            <button class="btn btn-sm btn-outline-primary">View</button>
                          </td>
                        </tr>
                        <tr *ngIf="!dashboardData?.recentOrders || dashboardData?.recentOrders?.length === 0">
                          <td colspan="6" class="text-center text-muted py-4">No recent orders</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
          </div>
        </ng-container>
      </div>
    </div>
  </div>
</div>