<div class="home-container">
  <!-- Main Navigation -->
  <nav class="main-nav">
    <div class="nav-container">
      <!-- Left Navigation -->
      <div class="nav-left">
        <a href="#" class="brand">DFashion</a>
        <div class="search-box">
          <input type="text" placeholder="Search for products, brands and more...">
          <ion-icon name="search-outline"></ion-icon>
        </div>
      </div>

      <!-- Right Navigation -->
      <div class="nav-right">
        <a routerlink="/explore" routerlinkactive="active"
        class="nav-link" href="/explore">
         <i  class="fas fa-compass"></i><span>Explore</span></a>
        </a>
        <a href="#" class="nav-link">
          <ion-icon name="notifications-outline"></ion-icon>
          Notifications
          <span class="badge">3</span>
        </a>
        <a href="#" class="nav-link">
          <ion-icon name="heart-outline"></ion-icon>
          Wishlist
        </a>
        <a href="#" class="nav-link active">
          <ion-icon name="cart-outline"></ion-icon>
          Cart
          <span class="badge">2</span>
        </a>
        <div class="total-box">
          <ion-icon name="wallet-outline"></ion-icon>
          <span class="amount">₹1,299</span>
        </div>
        <div class="user-menu">
          <img src="assets/images/avatar.jpg" alt="User" class="avatar">
          <span>John Doe</span>
          <ion-icon name="chevron-down-outline"></ion-icon>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="web-layout">
    <!-- Trending Section -->
    <section class="trending-section">
      <div class="section-header">
        <div class="header-left">
          <ion-icon name="trending-up" class="trending-icon"></ion-icon>
          <h2>Trending Products</h2>
          <span class="subtitle">See what's popular today</span>
        </div>
        <a href="#" class="view-all">
          View All
          <ion-icon name="arrow-forward-outline"></ion-icon>
        </a>
      </div>
      <div class="products-grid">
        <div class="product-card" *ngFor="let product of trendingProducts">
          <div class="product-image">
            <img [src]="product.images?.[0]?.url || 'assets/images/product-placeholder.png'" [alt]="product.name || 'Product'">
            <span class="discount-badge" *ngIf="product.discount">{{product.discount}}% OFF</span>
          </div>
          <div class="product-info">
            <div class="brand">{{product.brand}}</div>
            <h3 class="name">{{product.name}}</h3>
            <div class="price-row">
              <span class="current-price">₹{{product.price}}</span>
              <span class="original-price" *ngIf="product.originalPrice">₹{{product.originalPrice}}</span>
            </div>
            <div class="actions">
              <button class="add-to-cart" (click)="addToCart(product)">Add to Cart</button>
              <button class="wishlist" (click)="toggleWishlist(product)">
                <ion-icon [name]="isInWishlist(product._id) ? 'heart' : 'heart-outline'"></ion-icon>
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>

  <!-- Web Layout: Stories Section + Two Column Layout -->
  <div class="web-layout" *ngIf="!isMobile">
    <!-- Stories Section (Full Width) -->
    <div class="stories-section-container">
      <app-view-add-stories
        [stories]="socialStories"
        [showAddStory]="true"
        [addStoryText]="'Your Story'"
        (storyClick)="viewStory($event)"
        (createStory)="createStory()">
      </app-view-add-stories>
    </div>

    <!-- Two Column Layout -->
    <div class="two-column-layout">
      <!-- Post Section (Left Column) -->
      <div class="post-section">
        <app-feed></app-feed>
      </div>

      <!-- Sidebar Section (Right Column) -->
      <div class="sidebar-section">
        <app-sidebar class="desktop-sidebar"></app-sidebar>
      </div>
    </div>
  </div>

  <!-- Mobile Layout: Original Layout -->
  <div class="mobile-layout" *ngIf="isMobile">
    <div class="content-grid">
      <!-- Main Feed -->
      <div class="main-content">
        <!-- Responsive Stories Component (Works on all screen sizes) -->
        <app-view-add-stories
          [stories]="socialStories"
          [showAddStory]="true"
          [addStoryText]="'Your Story'"
          (storyClick)="viewStory($event)"
          (createStory)="createStory()">
        </app-view-add-stories>
        <!-- Social Feed with Posts and Reels -->
        <app-feed></app-feed>
      </div>

      <!-- Desktop Sidebar -->
      <app-sidebar class="desktop-sidebar"></app-sidebar>
    </div>
  </div>

  <!-- Mobile Tab Menu Overlay -->
  <div class="tab-menu-overlay"
       [class.active]="isTabMenuOpen"
       (click)="closeTabMenu()"
       *ngIf="isMobile">
  </div>

  <!-- Mobile Sidebar Overlay -->
  <div class="sidebar-overlay"
       [class.active]="isSidebarOpen"
       (click)="closeSidebar()"
       *ngIf="isMobile">
  </div>

  <!-- Instagram-Style Tab Menu -->
  <div class="instagram-tab-menu"
       [class.active]="isTabMenuOpen"
       *ngIf="isMobile">
    <div class="tab-menu-header">
      <h3>Discover</h3>
      <ion-icon name="close-outline" class="close-icon" (click)="closeTabMenu()"></ion-icon>
    </div>

    <div class="tab-menu-grid">
      <!-- Trending Products Tab -->
      <div class="tab-item" (click)="openSidebarTab('trending')">
        <div class="tab-icon trending">
          <ion-icon name="trending-up"></ion-icon>
        </div>
        <span class="tab-label">Trending</span>
        <div class="tab-tooltip">Hot products right now</div>
      </div>

      <!-- Featured Brands Tab -->
      <div class="tab-item" (click)="openSidebarTab('brands')">
        <div class="tab-icon brands">
          <ion-icon name="diamond"></ion-icon>
        </div>
        <span class="tab-label">Brands</span>
        <div class="tab-tooltip">Top fashion brands</div>
      </div>

      <!-- New Arrivals Tab -->
      <div class="tab-item" (click)="openSidebarTab('arrivals')">
        <div class="tab-icon arrivals">
          <ion-icon name="sparkles"></ion-icon>
        </div>
        <span class="tab-label">New</span>
        <div class="tab-tooltip">Latest arrivals</div>
      </div>

      <!-- Suggested for You Tab -->
      <div class="tab-item" (click)="openSidebarTab('suggested')">
        <div class="tab-icon suggested">
          <ion-icon name="heart"></ion-icon>
        </div>
        <span class="tab-label">For You</span>
        <div class="tab-tooltip">Personalized picks</div>
      </div>

      <!-- Fashion Influencers Tab -->
      <div class="tab-item" (click)="openSidebarTab('influencers')">
        <div class="tab-icon influencers">
          <ion-icon name="people"></ion-icon>
        </div>
        <span class="tab-label">Influencers</span>
        <div class="tab-tooltip">Top fashion creators</div>
      </div>

      <!-- Categories Tab -->
      <div class="tab-item" (click)="openSidebarTab('categories')">
        <div class="tab-icon categories">
          <ion-icon name="grid"></ion-icon>
        </div>
        <span class="tab-label">Categories</span>
        <div class="tab-tooltip">Browse by category</div>
      </div>
    </div>
  </div>

  <!-- Mobile Sidebar -->
  <div class="mobile-sidebar"
       [class.active]="isSidebarOpen"
       *ngIf="isMobile">
    <div class="sidebar-header">
      <div class="user-profile">
        <div class="profile-avatar">
          <img src="http://localhost:9000/uploads/avatars/default-avatar.png" alt="Profile">
        </div>
        <div class="profile-info">
          <h3>Your Profile</h3>
          <p>&#64;username</p>
        </div>
      </div>
      <ion-icon name="close-outline" class="close-icon" (click)="closeSidebar()"></ion-icon>
    </div>

    <!-- Instagram-style Profile Menu -->
    <div class="profile-menu" *ngIf="isEndUser()">
      <div class="menu-item dashboard-link" (click)="navigateToDashboard()">
        <div class="menu-icon">
          <ion-icon name="analytics-outline"></ion-icon>
        </div>
        <span class="menu-label">Dashboard</span>
        <div class="menu-description">Your activity & rewards</div>
        <ion-icon name="chevron-forward-outline" class="menu-arrow"></ion-icon>
      </div>

      <div class="menu-item" (click)="navigateToProfile()">
        <div class="menu-icon">
          <ion-icon name="person-outline"></ion-icon>
        </div>
        <span class="menu-label">Edit Profile</span>
        <div class="menu-description">Manage your account</div>
        <ion-icon name="chevron-forward-outline" class="menu-arrow"></ion-icon>
      </div>

      <div class="menu-item" (click)="navigateToSettings()">
        <div class="menu-icon">
          <ion-icon name="settings-outline"></ion-icon>
        </div>
        <span class="menu-label">Settings</span>
        <div class="menu-description">Privacy & preferences</div>
        <ion-icon name="chevron-forward-outline" class="menu-arrow"></ion-icon>
      </div>
    </div>

    <div class="sidebar-content">
      <app-sidebar></app-sidebar>
    </div>
  </div>

  <!-- Sidebar Content Modal -->
  <div class="sidebar-content-modal"
       [class.active]="isSidebarContentOpen"
       *ngIf="isMobile">
    <div class="modal-header">
      <h3>{{currentSidebarTitle}}</h3>
      <ion-icon name="close-outline" class="close-icon" (click)="closeSidebarContent()"></ion-icon>
    </div>

    <div class="modal-content">
      <!-- Trending Products Section -->
      <div *ngIf="currentSidebarTab === 'trending'" class="sidebar-section">
        <app-trending-products></app-trending-products>
      </div>

      <!-- Featured Brands Section -->
      <div *ngIf="currentSidebarTab === 'brands'" class="sidebar-section">
        <app-featured-brands></app-featured-brands>
      </div>

      <!-- New Arrivals Section -->
      <div *ngIf="currentSidebarTab === 'arrivals'" class="sidebar-section">
        <app-new-arrivals></app-new-arrivals>
      </div>

      <!-- Suggested for you -->
      <div *ngIf="currentSidebarTab === 'suggested'" class="sidebar-section">
        <app-suggested-for-you></app-suggested-for-you>
      </div>

      <!-- Top Fashion Influencers -->
      <div *ngIf="currentSidebarTab === 'influencers'" class="sidebar-section">
        <app-top-fashion-influencers></app-top-fashion-influencers>
      </div>

      <!-- Categories (placeholder) -->
      <div *ngIf="currentSidebarTab === 'categories'" class="sidebar-section">
        <div class="categories-grid">
          <div class="category-item" *ngFor="let category of categories">
            <div class="category-icon">
              <ion-icon [name]="category.icon"></ion-icon>
            </div>
            <span>{{category.name}}</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Social Bottom Navigation (Mobile Only) -->
  <div class="social-bottom-nav" *ngIf="isMobile">
    <div class="nav-item active">
      <ion-icon name="home"></ion-icon>
    </div>
    <div class="nav-item">
      <ion-icon name="search"></ion-icon>
    </div>
    <div class="nav-item">
      <ion-icon name="add-circle-outline"></ion-icon>
    </div>
    <div class="nav-item">
      <ion-icon name="play-circle-outline"></ion-icon>
    </div>
    <div class="nav-item">
      <div class="profile-avatar-nav">
  <img src="http://localhost:9000/uploads/avatars/default-avatar.png" alt="Profile">
      </div>
    </div>
  </div>
</div>
