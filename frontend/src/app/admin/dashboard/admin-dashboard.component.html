<div class="container-scroller">
  <!-- Navbar -->
  <nav class="navbar col-lg-12 col-12 p-0 fixed-top d-flex flex-row">
    <div class="navbar-brand-wrapper d-flex justify-content-center">
      <div class="navbar-brand-inner-wrapper d-flex justify-content-between align-items-center w-100">
        <a class="navbar-brand brand-logo">
          <img src="assets/images/logo.svg" alt="logo"/>
        </a>
        <a class="navbar-brand brand-logo-mini">
          <img src="assets/images/logo-mini.svg" alt="logo"/>
        </a>
        <button class="navbar-toggler navbar-toggler align-self-center" type="button" (click)="toggleSidebar()">
          <span class="typcn typcn-th-menu"></span>
        </button>
      </div>
    </div>
    
    <div class="navbar-menu-wrapper d-flex align-items-center justify-content-end">
      <ul class="navbar-nav me-lg-2">
        <li class="nav-item nav-profile dropdown">
          <a class="nav-link" href="#" data-bs-toggle="dropdown" id="profileDropdown">
            <img [src]="(currentUser$ | async)?.avatar || 'assets/images/faces/default.jpg'" alt="profile"/>
            <span class="nav-profile-name">{{ (currentUser$ | async)?.fullName }}</span>
          </a>
          <div class="dropdown-menu dropdown-menu-right navbar-dropdown" aria-labelledby="profileDropdown">
            <a class="dropdown-item" routerLink="/admin/settings">
              <i class="typcn typcn-cog-outline text-primary"></i>
              Settings
            </a>
            <a class="dropdown-item" (click)="logout()">
              <i class="typcn typcn-eject text-primary"></i>
              Logout
            </a>
          </div>
        </li>
      </ul>
    </div>
  </nav>

  <!-- Main Container -->
  <div class="container-fluid page-body-wrapper">
    <!-- Sidebar -->
    <nav class="sidebar sidebar-offcanvas" id="sidebar">
      <ul class="nav">
        <li class="nav-item" *ngFor="let item of menuItems">
          <a class="nav-link" [routerLink]="item.route" routerLinkActive="active">
            <i class="typcn" [ngClass]="item.icon"></i>
            <span class="menu-title">{{item.title}}</span>
          </a>
        </li>
      </ul>
    </nav>

    <!-- Main Panel -->
    <div class="main-panel">
      <div class="content-wrapper">
        <!-- Quick Stats Cards -->
        <div class="row">
          <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 grid-margin" *ngFor="let stat of quickStats">
            <div class="card card-statistics">
              <div class="card-body">
                <div class="d-flex flex-md-column flex-xl-row flex-wrap justify-content-between align-items-md-center justify-content-xl-between">
                  <div class="float-left">
                    <i class="typcn" [ngClass]="stat.icon + ' text-' + stat.color + ' icon-lg'"></i>
                    <p class="mb-0 text-muted">{{stat.title}}</p>
                    <h3 class="font-weight-medium mb-2">
                      <span *ngIf="stat.prefix">{{stat.prefix}}</span>
                      {{stat.value | number}}
                    </h3>
                  </div>
                  <div class="float-right">
                    <p class="mb-0 text-right" [ngClass]="'text-' + getChangeClass(stat.changeType)">
                      {{stat.change}}
                    </p>
                    <p class="mb-0 text-muted">Growth</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Charts Section -->
        <div class="row">
          <!-- Sales Chart -->
          <div class="col-md-8 grid-margin stretch-card">
            <div class="card">
              <div class="card-body">
                <p class="card-title mb-0">Sales Analytics</p>
                <div class="d-flex flex-wrap justify-content-between justify-content-md-center justify-content-xl-between align-items-center">
                  <h3 class="mb-0 mb-md-2 mb-xl-0 order-md-1 order-xl-0">
                    {{totalSales | currency}}
                  </h3>
                  <i class="typcn typcn-chart-line icon-xl text-primary order-md-2 order-xl-1"></i>
                </div>
                <canvas id="salesChart"></canvas>
              </div>
            </div>
          </div>

          <!-- Traffic Sources -->
          <div class="col-md-4 grid-margin stretch-card">
            <div class="card">
              <div class="card-body">
                <p class="card-title">Traffic Sources</p>
                <canvas id="trafficChart"></canvas>
              </div>
            </div>
          </div>
        </div>

        <!-- Recent Orders Table -->
        <div class="row">
          <div class="col-md-12 grid-margin stretch-card">
            <div class="card">
              <div class="card-body">
                <p class="card-title mb-0">Recent Orders</p>
                <div class="table-responsive">
                  <table class="table table-hover">
                    <thead>
                      <tr>
                        <th>Order ID</th>
                        <th>Customer</th>
                        <th>Product</th>
                        <th>Amount</th>
                        <th>Status</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let order of recentOrders">
                        <td>{{order.id}}</td>
                        <td>{{order.customerName}}</td>
                        <td>{{order.productName}}</td>
                        <td>{{order.amount | currency}}</td>
                        <td>
                          <label [class]="'badge badge-' + order.statusClass">{{order.status}}</label>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Footer -->
      <footer class="footer">
        <div class="card">
          <div class="card-body">
            <div class="d-sm-flex justify-content-center justify-content-sm-between">
              <span class="text-muted text-center text-sm-left d-block d-sm-inline-block">
                Copyright Â© {{currentYear}} DFashion. All rights reserved.
              </span>
              <span class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center">
                Crafted with <i class="typcn typcn-heart text-danger"></i>
              </span>
            </div>
          </div>
        </div>
      </footer>
    </div>
  </div>
</div>

    <!-- Charts Section -->
    <div class="charts-section">
      <div class="charts-grid">
        <!-- User Growth Chart -->
        <mat-card class="chart-card">
          <mat-card-header>
            <mat-card-title>User Growth</mat-card-title>
            <mat-card-subtitle>Monthly new user registrations</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <div class="chart-container">
              <div class="chart-placeholder">
                <mat-icon>show_chart</mat-icon>
                <h3>User Growth Chart</h3>
                <p>Chart visualization will be displayed here</p>
                <div class="mock-data">
                  <small>Sample data: {{ userGrowthChartData.data.join(', ') }}</small>
                </div>
              </div>
            </div>
          </mat-card-content>
        </mat-card>

        <!-- Order Trends Chart -->
        <mat-card class="chart-card">
          <mat-card-header>
            <mat-card-title>Order Trends</mat-card-title>
            <mat-card-subtitle>Daily orders this week</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <div class="chart-container">
              <div class="chart-placeholder">
                <mat-icon>bar_chart</mat-icon>
                <h3>Order Trends Chart</h3>
                <p>Chart visualization will be displayed here</p>
                <div class="mock-data">
                  <small>Sample data: {{ orderTrendsChartData.data.join(', ') }}</small>
                </div>
              </div>
            </div>
          </mat-card-content>
        </mat-card>

        <!-- Revenue Distribution Chart -->
        <mat-card class="chart-card">
          <mat-card-header>
            <mat-card-title>Revenue Distribution</mat-card-title>
            <mat-card-subtitle>Revenue by category</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <div class="chart-container">
              <div class="chart-placeholder">
                <mat-icon>donut_large</mat-icon>
                <h3>Revenue Distribution Chart</h3>
                <p>Chart visualization will be displayed here</p>
                <div class="mock-data">
                  <small>Sample data: {{ revenueChartData.data.join(', ') }}</small>
                </div>
              </div>
            </div>
          </mat-card-content>
        </mat-card>
      </div>
    </div>

    <!-- Bottom Section -->
    <div class="bottom-section">
      <!-- Recent Activities -->
      <mat-card class="activities-card">
        <mat-card-header>
          <mat-card-title>Recent Activities</mat-card-title>
          <mat-card-subtitle>Latest system activities</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <div class="activities-list">
            <div *ngFor="let activity of recentActivities" class="activity-item">
              <div class="activity-icon" [style.background-color]="activity.color">
                <mat-icon>{{ activity.icon }}</mat-icon>
              </div>
              <div class="activity-content">
                <div class="activity-message">{{ activity.message }}</div>
                <div class="activity-time">{{ activity.time }}</div>
              </div>
            </div>
          </div>
          <div class="activities-footer">
            <button mat-button color="primary">View All Activities</button>
          </div>
        </mat-card-content>
      </mat-card>

      <!-- Quick Actions -->
      <mat-card class="actions-card">
        <mat-card-header>
          <mat-card-title>Quick Actions</mat-card-title>
          <mat-card-subtitle>Common administrative tasks</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <div class="actions-grid">
            <button mat-raised-button class="action-button" (click)="navigateToSection('users')">
              <mat-icon>person_add</mat-icon>
              <span>Add User</span>
            </button>
            <button mat-raised-button class="action-button" (click)="navigateToSection('products')">
              <mat-icon>add_box</mat-icon>
              <span>Add Product</span>
            </button>
            <button mat-raised-button class="action-button" (click)="navigateToSection('orders')">
              <mat-icon>list_alt</mat-icon>
              <span>View Orders</span>
            </button>
            <button mat-raised-button class="action-button">
              <mat-icon>analytics</mat-icon>
              <span>View Reports</span>
            </button>
            <button mat-raised-button class="action-button">
              <mat-icon>settings</mat-icon>
              <span>Settings</span>
            </button>
            <button mat-raised-button class="action-button">
              <mat-icon>help</mat-icon>
              <span>Help Center</span>
            </button>
          </div>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- System Status -->
    <mat-card class="status-card">
      <mat-card-header>
        <mat-card-title>System Status</mat-card-title>
        <mat-card-subtitle>Current system health and performance</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <div class="status-grid">
          <div class="status-item">
            <div class="status-indicator online"></div>
            <div class="status-info">
              <div class="status-label">API Server</div>
              <div class="status-value">Online</div>
            </div>
          </div>
          <div class="status-item">
            <div class="status-indicator online"></div>
            <div class="status-info">
              <div class="status-label">Database</div>
              <div class="status-value">Connected</div>
            </div>
          </div>
          <div class="status-item">
            <div class="status-indicator warning"></div>
            <div class="status-info">
              <div class="status-label">Storage</div>
              <div class="status-value">85% Used</div>
            </div>
          </div>
          <div class="status-item">
            <div class="status-indicator online"></div>
            <div class="status-info">
              <div class="status-label">Payment Gateway</div>
              <div class="status-value">Active</div>
            </div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
