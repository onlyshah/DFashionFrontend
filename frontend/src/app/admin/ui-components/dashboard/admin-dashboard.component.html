<div class="admin-dashboard">
  <!-- Loading State -->
  <div *ngIf="isLoading" class="d-flex justify-content-center align-items-center" style="height: 400px;">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>

  <!-- Dashboard Content -->
  <div *ngIf="!isLoading">
    <!-- Statistics Cards Row -->
    <div class="row">
      <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
        <app-stats-card
          title="Total Sales"
          [value]="formatNumber(stats.totalSales)"
          [growth]="stats.salesGrowth"
          icon="typcn-chart-line"
          color="primary"
          [isLoading]="false">
        </app-stats-card>
      </div>
      
      <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
        <app-stats-card
          title="Total Orders"
          [value]="formatNumber(stats.totalOrders)"
          [growth]="stats.ordersGrowth"
          icon="typcn-shopping-bag"
          color="success"
          [isLoading]="false">
        </app-stats-card>
      </div>
      
      <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
        <app-stats-card
          title="Total Customers"
          [value]="formatNumber(stats.totalCustomers)"
          [growth]="stats.customersGrowth"
          icon="typcn-group"
          color="info"
          [isLoading]="false">
        </app-stats-card>
      </div>
      
      <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
        <app-stats-card
          title="Total Revenue"
          [value]="formatCurrency(stats.totalRevenue)"
          [growth]="stats.revenueGrowth"
          icon="typcn-calculator"
          color="warning"
          [isLoading]="false">
        </app-stats-card>
      </div>
    </div>

    <!-- Charts Row -->
    <div class="row">
      <div class="col-lg-8 grid-margin stretch-card">
        <app-chart-widget
          title="Sales Overview"
          subtitle="Monthly sales performance"
          [chartData]="salesChartData"
          chartType="line"
          height="400">
        </app-chart-widget>
      </div>
      
      <div class="col-lg-4 grid-margin stretch-card">
        <app-chart-widget
          title="Orders by Day"
          subtitle="Weekly order distribution"
          [chartData]="ordersChartData"
          chartType="doughnut"
          height="400">
        </app-chart-widget>
      </div>
    </div>

    <!-- Data Tables Row -->
    <div class="row">
      <div class="col-lg-7 grid-margin stretch-card">
        <app-data-card
          title="Recent Orders"
          subtitle="Latest customer orders"
          [hasActions]="true">
          
          <div class="table-responsive">
            <table class="table table-hover">
              <thead>
                <tr>
                  <th>Order ID</th>
                  <th>Customer</th>
                  <th>Product</th>
                  <th>Amount</th>
                  <th>Status</th>
                  <th>Date</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let order of recentOrders">
                  <td class="font-weight-medium">{{ order.id }}</td>
                  <td>{{ order.customer }}</td>
                  <td>{{ order.product }}</td>
                  <td>{{ formatCurrency(order.amount) }}</td>
                  <td>
                    <span class="badge" [ngClass]="getStatusClass(order.status)">
                      {{ order.status | titlecase }}
                    </span>
                  </td>
                  <td>{{ order.date | date:'short' }}</td>
                </tr>
              </tbody>
            </table>
          </div>
          
          <div slot="actions" class="card-footer text-center">
            <a href="javascript:void(0);" class="btn btn-outline-primary btn-sm">
              View All Orders
            </a>
          </div>
        </app-data-card>
      </div>
      
      <div class="col-lg-5 grid-margin stretch-card">
        <app-data-card
          title="Top Products"
          subtitle="Best selling products"
          [hasActions]="true">
          
          <div class="top-products-list">
            <div class="product-item d-flex align-items-center" *ngFor="let product of topProducts">
              <div class="product-image me-3">
                <img [src]="product.image" [alt]="product.name" class="rounded">
              </div>
              <div class="product-info flex-grow-1">
                <h6 class="product-name mb-1">{{ product.name }}</h6>
                <p class="product-category text-muted mb-1">{{ product.category }}</p>
                <div class="product-stats d-flex justify-content-between">
                  <span class="sales-count">{{ product.sales }} sales</span>
                  <span class="revenue-amount font-weight-bold">{{ formatCurrency(product.revenue) }}</span>
                </div>
              </div>
            </div>
          </div>
          
          <div slot="actions" class="card-footer text-center">
            <a href="javascript:void(0);" class="btn btn-outline-primary btn-sm">
              View All Products
            </a>
          </div>
        </app-data-card>
      </div>
    </div>

    <!-- Additional Analytics Row -->
    <div class="row">
      <div class="col-lg-12 grid-margin stretch-card">
        <app-chart-widget
          title="Revenue Trends"
          subtitle="Quarterly revenue analysis"
          [chartData]="revenueChartData"
          chartType="bar"
          height="300">
        </app-chart-widget>
      </div>
    </div>
  </div>
</div>
