<mat-toolbar class="admin-header">
  <!-- Brand/Logo and Sidebar Toggle -->
  <div class="navbar-brand-wrapper d-flex align-items-center">
    <a class="navbar-brand brand-logo" routerLink="/admin/dashboard">
      <img src="assets/pollux/images/logo.svg" alt="logo" 
      style="width: 200px; height: 100px;"
      />
    </a>
    <button mat-icon-button class="menu-toggle" (click)="toggleSidebar()">
      <mat-icon>menu</mat-icon>
    </button>
  </div>

  <!-- Page Title (optional, can be set via @Input or service) -->
  <div class="page-title">
    <h1>{{ pageTitle || 'Dashboard' }}</h1>
  </div>

  <!-- Header Actions -->
  <div class="header-actions d-flex align-items-center">
    <!-- Search -->
    <div class="search-container">
      <mat-form-field appearance="outline" class="search-field">
        <mat-label>Search...</mat-label>
        <input matInput [(ngModel)]="searchQuery" (keyup.enter)="onSearch()">
        <mat-icon matSuffix>search</mat-icon>
      </mat-form-field>
    </div>

    <!-- Notifications -->
    <button mat-icon-button [matMenuTriggerFor]="notificationMenu" class="notification-button">
      <mat-icon [matBadge]="notificationCount" matBadgeColor="warn">notifications</mat-icon>
    </button>
    <mat-menu #notificationMenu="matMenu" class="notification-menu">
      <div class="notification-header">
        <h3>Notifications</h3>
        <button mat-button color="primary" (click)="markAllAsRead()">Mark all as read</button>
      </div>
      <mat-divider></mat-divider>
      <div class="notification-list">
        <button *ngFor="let notification of recentNotifications" mat-menu-item class="notification-item" [class.unread]="!notification.read" (click)="onNotificationClick(notification)">
          <div class="notification-content">
            <div class="notification-title">{{ notification.title }}</div>
            <div class="notification-message">{{ notification.message }}</div>
            <div class="notification-time">{{ formatNotificationTime(notification.time) }}</div>
          </div>
        </button>
      </div>
      <mat-divider></mat-divider>
      <button mat-menu-item routerLink="/admin/notifications" class="view-all-button">
        <mat-icon>list</mat-icon>
        View All Notifications
      </button>
    </mat-menu>

    <!-- Quick Actions -->
    <button mat-icon-button [matMenuTriggerFor]="quickActionsMenu" matTooltip="Quick Actions">
      <mat-icon>add</mat-icon>
    </button>
    <mat-menu #quickActionsMenu="matMenu">
      <button mat-menu-item routerLink="/admin/products/new">
        <mat-icon>add_box</mat-icon>
        <span>Add Product</span>
      </button>
      <button mat-menu-item routerLink="/admin/users/new">
        <mat-icon>person_add</mat-icon>
        <span>Add User</span>
      </button>
      <button mat-menu-item routerLink="/admin/orders">
        <mat-icon>shopping_cart</mat-icon>
        <span>View Orders</span>
      </button>
      <button mat-menu-item routerLink="/admin/analytics">
        <mat-icon>analytics</mat-icon>
        <span>View Analytics</span>
      </button>
    </mat-menu>

    <!-- User Profile -->
    <button mat-icon-button [matMenuTriggerFor]="userMenu" class="user-profile-button">
      <mat-icon>account_circle</mat-icon>
    </button>
    <mat-menu #userMenu="matMenu">
      <div class="user-menu-header" *ngIf="currentUser">
        <div class="user-info">
          <div class="user-name">{{ currentUser.fullName }}</div>
          <div class="user-email">{{ currentUser.email }}</div>
        </div>
      </div>
      <mat-divider></mat-divider>
      <button mat-menu-item routerLink="/admin/profile">
        <mat-icon>person</mat-icon>
        <span>My Profile</span>
      </button>
      <button mat-menu-item routerLink="/admin/settings">
        <mat-icon>settings</mat-icon>
        <span>Settings</span>
      </button>
      <mat-divider></mat-divider>
      <button mat-menu-item (click)="logout()">
        <mat-icon>logout</mat-icon>
        <span>Logout</span>
      </button>
    </mat-menu>
  </div>
</mat-toolbar>
